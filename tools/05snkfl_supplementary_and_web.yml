"""
snakemake -j all -s tools/05snkfl_supplementary_and_web.yml --config etissue_class_ods=config/etissue_class.ods max_gwas_class_count=4 db_url='postgresql://chiliconcarne101usr:chiliconcarne101pwd@0.0.0.0:5435/gwas2eqtl' outdir=out/7_7
"""

gwas_class_ods = config['gwas_class_ods']
outdir = config['outdir']
etissue_class_ods = config['etissue_class_ods']


rule all_05snkfl_supplementary_and_web:
    input:
        os.path.join(outdir, "ms_supp_tab/supplementary_table.xlsx"),

rule create_table_supplementary:
    input:
        gwas_class_ods,
        "config/etissue_class.ods",
        os.path.join(outdir, "cmpt_count_per_rsid.py/count_per_rsid_gwas.tsv"),
        os.path.join(outdir, "cmpt_count_per_rsid.py/count_per_rsid_egene.tsv"),
        os.path.join(outdir, "cmpt_count_per_rsid.py/count_per_rsid_etissue.tsv"),
        os.path.join(outdir, "cmpt_pleiotropic_regions.py/region_window_100000.tsv"),
    output:
        os.path.join(outdir, "ms_supp_tab/supplementary_table.xlsx"),
    params:
        indir=outdir,
    shell:
        "python scripts/cmpt_supplementary_files.py {input[0]} {params.indir} {output[0]}"
